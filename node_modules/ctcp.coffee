exports.module = ->
	@META =
		name: 'CTCP'
		author: 'Theme97'
		version: '1.0'
		hidden: true
	
	@on 'ctcp', (from, to, msg) ->
		switch cmd = msg.toUpperCase()
			when 'SOURCE'
				reply = 'https://github.com/Theme97/shizuku';
			when 'VERSION'
				reply = 'shizuku, a node.js bot by Theme97 || modules: ';
				modules = for i, {META: $} of @bot.modules.modules when !($ ?= {}).hidden
					name = $.name ? "<#{i}>"
					name += " v#{$.version}" if $.version
					"[#{name}]"
				reply += (modules.join ' ') || '<none>'
		@bot.irc.notice from.nick, "\x01#{cmd} #{reply}\x01" if reply
