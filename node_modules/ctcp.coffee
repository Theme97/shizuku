exports.module = ->
	@META =
		name: 'CTCP'
		author: 'Theme97'
		version: '1.0'
		hidden: true
	
	@on 'ctcp', (from, to, msg) ->
		switch cmd = msg.toUpperCase()
			when 'SOURCE'
				reply = 'https://github.com/Theme97/shizuku';
			when 'VERSION'
				reply = 'shizuku, a node.js bot by Theme97 || modules: ';
				modules = for i, module of @bot.modules.modules when !(meta = module.META ? {}).hidden
					name = meta.name ? "<#{i}>"
					name += " v#{meta.version}" if meta.version
					"[#{name}]"
				reply += (if modules.length then modules.join ' ' else '<none>')
		@bot.irc.notice from.nick, "\x01#{cmd} #{reply}\x01" if reply
