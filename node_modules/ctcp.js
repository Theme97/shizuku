exports.module = function(){ return new CTCP(this); };

var CTCP = function($){
	$.META = {
		name: 'CTCP',
		author: 'Theme97',
		version: '1.0',
	};
	$.on('ctcp', function(from, to, msg){
		reply = '';
		switch (cmd = msg.toUpperCase()) {
			case 'SOURCE':
				reply = 'https://github.com/Theme97/shizuku';
				break;
			case 'VERSION':
				reply = 'shizuku, a node.js bot by Theme97 || modules: ';
				var modules = [], module, i;
				for (i in this.bot.modules.modules) {
					meta = this.bot.modules.modules[i].META || {};
					modules.push(
						'[' +
						(meta.name || '<' + i + '>') +
						(meta.version ? ' v' + meta.version : '') +
						(meta.author ? ' by ' + meta.author : '') +
						']'
					);
				}
				reply += (modules.length ? modules.join(' ') : '<none>');
				break;
		}
		if (reply) this.bot.irc.sendRaw('NOTICE ' + from.nick + ' :\x01' + cmd + ' ' + reply + '\x01');
	});
};
